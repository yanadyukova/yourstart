@@include('templates/desktop/include/header.html')

<section data-page="map" class="map">
    <div class="map__inner">
        <a href="#" class="map-content-toggle jsMapContentToggle"></a>
        <div class="map-content jsMapContent">
            <div class="map-content__inner">
                <div class="baron jsScroller">
                    <div class="baron__scroller">
                        <div class="map-content__head">
                            <a href="#" class="map-logo"></a>
                            <a href="/html/desktop/index.html" class="button-back map-content__back">Назад</a>
                            <div class="map-content__title">НАШИ<br>СОБЫТИЯ</div>
                            <div class="map-content__desc">7 раз наши партнеры обогнули земной шар</div>
                            <div class="map-content__search">
                                <form action="#" class="map-search">
                                    <div class="map-search__body">
                                        <input type="text" class="map-search__input" required placeholder="Поиск по названию или по городу">
                                        <button class="map-search__button"></button>
                                    </div>
                                    <div class="map-search__foot">
                                        <div class="map-search__result">Найдено 6 мероприятий</div>
                                    </div>
                                </form>
                            </div>
                            <div class="map-content__sorting">
                                <div class="map-sorting">
                                    <div class="map-sorting__title">Сортировать мероприятия:</div>
                                    <form action="" class="map-sorting__body">
                                        <div class="map-sorting__list">
                                            <ul>
                                                <li>
                                                    <label>
                                                        <input type="checkbox" checked value="1">
                                                        <span>Актуальные</span>
                                                    </label>
                                                </li>
                                                <li>
                                                    <label>
                                                        <input type="checkbox">
                                                        <span>Прошедшие</span>
                                                    </label>
                                                </li>
                                                <li>
                                                    <label>
                                                        <input type="checkbox">
                                                        <span>Юбилейные страны</span>
                                                    </label>
                                                </li>
                                                <li>
                                                    <label>
                                                        <input type="checkbox">
                                                        <span>Фотоотчет</span>
                                                    </label>
                                                </li>
                                                <li>
                                                    <label>
                                                        <input type="checkbox">
                                                        <span>видеоотчеты</span>
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="map-content__body">
                            <div class="map-list">
                                <div class="map-list__inner">
                                    <div class="map-card">
                                        <div class="map-card__inner">
                                            <div class="map-card__head">
                                                <div class="map-card__label">Актуальное</div>
                                                <div class="map-card__media">
                                                    <a data-modal-video data-src="https://www.youtube.com/embed/P38acjc8DyY" href="#" class="video-link" style="background-image: url('/images/desktop/demo/13.jpg');"></a>
                                                </div>
                                            </div>
                                            <div class="map-card__body">
                                                <a href="/html/desktop/travel.html" target="_blank" class="map-card__link">
                                                    <span class="map-card__title">Международная Бриллиантовая Конференция 2018.</span>
                                                    <span class="map-card__desc">Токио и Киото</span>
                                                </a>
                                            </div>
                                            <div class="map-card__foot">
                                                <div class="map-card__caption">
                                                    <span>До старта:</span>
                                                    <strong>81 день</strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="map-card">
                                        <div class="map-card__inner">
                                            <div class="map-card__head">
                                                <div class="map-card__label">Юбилейная страна</div>
                                                <div class="map-card__media">
                                                    <a data-modal-video data-src="https://www.youtube.com/embed/P38acjc8DyY" href="#" class="video-link" style="background-image: url('/images/desktop/demo/13.jpg');"></a>
                                                </div>
                                            </div>
                                            <div class="map-card__body">
                                                <a href="/html/desktop/travel.html" target="_blank" class="map-card__link">
                                                    <span class="map-card__title">Международная Бриллиантовая Конференция 2018. Международная Бриллиантовая Конференция 2018.</span>
                                                    <span class="map-card__desc">Новосибирск и Новосбириская область</span>
                                                </a>
                                            </div>
                                            <div class="map-card__foot">
                                                <div class="map-card__caption">
                                                    <span>До старта:</span>
                                                    <strong>81 день</strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="map-card">
                                        <div class="map-card__inner">
                                            <div class="map-card__head">
                                                <div class="map-card__label">Актуальное</div>
                                                <div class="map-card__media">
                                                    <a data-modal-video data-src="https://www.youtube.com/embed/P38acjc8DyY" href="#" class="video-link" style="background-image: url('/images/desktop/demo/13.jpg');"></a>
                                                </div>
                                            </div>
                                            <div class="map-card__body">
                                                <a href="/html/desktop/travel.html" target="_blank" class="map-card__link">
                                                    <span class="map-card__title">Международная Бриллиантовая Конференция 2018.</span>
                                                    <span class="map-card__desc">Токио и Киото</span>
                                                </a>
                                            </div>
                                            <div class="map-card__foot">
                                                <div class="map-card__caption">
                                                    <span>До старта:</span>
                                                    <strong>81 день</strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="map-card">
                                        <div class="map-card__inner">
                                            <div class="map-card__head">
                                                <div class="map-card__label">Актуальное</div>
                                                <div class="map-card__media">
                                                    <a data-modal-video data-src="https://www.youtube.com/embed/P38acjc8DyY" href="#" class="video-link" style="background-image: url('/images/desktop/demo/13.jpg');"></a>
                                                </div>
                                            </div>
                                            <div class="map-card__body">
                                                <a href="/html/desktop/travel.html" target="_blank" class="map-card__link">
                                                    <span class="map-card__title">Международная Бриллиантовая Конференция 2018.</span>
                                                    <span class="map-card__desc">Токио и Киото</span>
                                                </a>
                                            </div>
                                            <div class="map-card__foot">
                                                <div class="map-card__caption">
                                                    <span>До старта:</span>
                                                    <strong>81 день</strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="map-card">
                                        <div class="map-card__inner">
                                            <div class="map-card__head">
                                                <div class="map-card__label">Актуальное</div>
                                                <div class="map-card__media">
                                                    <a data-modal-video data-src="https://www.youtube.com/embed/P38acjc8DyY" href="#" class="video-link" style="background-image: url('/images/desktop/demo/13.jpg');"></a>
                                                </div>
                                            </div>
                                            <div class="map-card__body">
                                                <a href="/html/desktop/travel.html" target="_blank" class="map-card__link">
                                                    <span class="map-card__title">Международная Бриллиантовая Конференция 2018.</span>
                                                    <span class="map-card__desc">Токио и Киото</span>
                                                </a>
                                            </div>
                                            <div class="map-card__foot">
                                                <div class="map-card__caption">
                                                    <span>До старта:</span>
                                                    <strong>81 день</strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="baron__track">
                        <div class="baron__free">
                            <div class="baron__bar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="map-google">
            <div id="map" class="map-google__iframe"></div>
        </div>
    </div>
</section>

@@include('templates/desktop/include/footer.html')

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBbMLcqrGgpD1oUbRfTF38P4R0SH7daDAg"></script>
<script src="/node_modules/markerclustererplus/src/markerclusterer.js"></script>
<script src="/node_modules/snazzy-info-window/dist/snazzy-info-window.js"></script>
<script>
    $(function() {
        var mapCenter = {lat: 55.73929, lng: 37.6020809};

        var mapStyle = [
            {
                "featureType": "water",
                "elementType": "geometry",
                "stylers": [
                    {
                        "color": "#e9e9e9"
                    },
                    {
                        "lightness": 17
                    }
                ]
            },
            {
                "featureType": "landscape",
                "elementType": "all",
                "stylers": [
                    {
                        "saturation": -100
                    },
                    {
                        "lightness": 65
                    },
                    {
                        "visibility": "on"
                    }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#ffffff"
                    },
                    {
                        "lightness": 17
                    }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "geometry.stroke",
                "stylers": [
                    {
                        "color": "#ffffff"
                    },
                    {
                        "lightness": 29
                    },
                    {
                        "weight": 0.2
                    }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "geometry",
                "stylers": [
                    {
                        "color": "#ffffff"
                    },
                    {
                        "lightness": 18
                    }
                ]
            },
            {
                "featureType": "road.local",
                "elementType": "geometry",
                "stylers": [
                    {
                        "color": "#ffffff"
                    },
                    {
                        "lightness": 16
                    }
                ]
            },
            {
                "featureType": "poi",
                "elementType": "geometry",
                "stylers": [
                    {
                        "color": "#f5f5f5"
                    },
                    {
                        "lightness": 21
                    }
                ]
            },
            {
                "featureType": "poi.park",
                "elementType": "geometry",
                "stylers": [
                    {
                        "color": "#dedede"
                    },
                    {
                        "lightness": 21
                    }
                ]
            },
            {
                "elementType": "labels.text.stroke",
                "stylers": [
                    {
                        "visibility": "on"
                    },
                    {
                        "color": "#ffffff"
                    },
                    {
                        "lightness": 16
                    }
                ]
            },
            {
                "elementType": "labels.text.fill",
                "stylers": [
                    {
                        "saturation": 36
                    },
                    {
                        "color": "#333333"
                    },
                    {
                        "lightness": 40
                    }
                ]
            },
            {
                "elementType": "labels.icon",
                "stylers": [
                    {
                        "visibility": "off"
                    }
                ]
            },
            {
                "featureType": "transit",
                "elementType": "geometry",
                "stylers": [
                    {
                        "color": "#f2f2f2"
                    },
                    {
                        "lightness": 19
                    }
                ]
            },
            {
                "featureType": "administrative",
                "elementType": "geometry.fill",
                "stylers": [
                    {
                        "color": "#fefefe"
                    },
                    {
                        "lightness": 20
                    }
                ]
            },
            {
                "featureType": "administrative",
                "elementType": "geometry.stroke",
                "stylers": [
                    {
                        "color": "#fefefe"
                    },
                    {
                        "lightness": 17
                    },
                    {
                        "weight": 1.2
                    }
                ]
            }
        ];

        var markerStyle1 = {
                url: '/images/desktop/map/marker/1.svg',
                scaledSize: new google.maps.Size(33, 46),
                anchor: new google.maps.Point(16, 46)
            },
            markerStyle2 = {
                url: '/images/desktop/map/marker/2.svg',
                scaledSize: new google.maps.Size(33, 46),
                anchor: new google.maps.Point(16, 46)
            },
            markerStyle3 = {
                url: '/images/desktop/map/marker/3.svg',
                scaledSize: new google.maps.Size(33, 46),
                anchor: new google.maps.Point(16, 46)
            };

        var clusterOptions = {
                styles: [{
                    url: '/images/desktop/map/group/all.svg',
                    height: 64,
                    width: 64,
                    textColor: '#ffffff',
                    textSize: 18,
                }],
                // zoomOnClick: false
            };

        var mapOptions = {
            zoom: 11,
            styles: mapStyle,
            scrollwheel: false,
            streetViewControl: false,
            mapTypeControl: false,
            fullscreenControl: false,
            center: mapCenter
        };

        var map = new google.maps.Map(document.getElementById('map'), mapOptions);

        var markers = [],
            marker,
            markerCluster;


        function createMarker(position, url, style) {
            var marker = new google.maps.Marker({
                map: map,
                // optimized: false,
                icon: style,
                position: position,
                url: url
            });

            markers.push(marker);

            google.maps.event.addListener(marker, 'click', function() {
                window.open(this.url, '_blank');
            });
        }

        function createCluster() {
            markerCluster = new MarkerClusterer(map, markers, clusterOptions);
        }

        function fitMarkers() {
            if (markers.length < 1) {
                return;
            }
            markerCluster.fitMapToMarkers();
        }

        function createInitMarkers() {
            // createMarker({lat: 55.818067,lng: -77.7260949}, 'event1.html', markerStyle1);
            // createMarker({lat: 55.8054193,lng: 37.5209137}, 'event2.html', markerStyle2);
            // createMarker({lat: 35.8054193,lng: 22.5209137}, 'event2.html', markerStyle2);
            // createMarker({lat: 55.722023,lng: 67.560066}, 'event4.html', markerStyle3);
            // createMarker({lat: 50.722023,lng: 17.560066}, 'event4.html', markerStyle3);
        }

        // добавляем маркеры на карту
        (function addMarkers() {
            createInitMarkers();
            createCluster();
            fitMarkers();
        })();
    });
</script>
